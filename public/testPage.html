<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Curtin Deadlines â€” Test Panel</title>
    <style>
      /* â”€â”€ Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

      :root {
        --bg: #f5f5f7;
        --surface: #ffffff;
        --border: #d1d1d6;
        --text: #1c1c1e;
        --muted: #8e8e93;
        --accent: #0071e3;
        --ok: #34c759;
        --warn: #ff9f0a;
        --error: #ff3b30;
        --info: #636366;
        --mono: 'SF Mono', ui-monospace, monospace;
      }

      body.dark {
        --bg: #1c1c1e;
        --surface: #2c2c2e;
        --border: #3a3a3c;
        --text: #f5f5f7;
        --muted: #8e8e93;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 13px;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        padding: 0 0 60px;
      }

      /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .tp-header {
        background: var(--surface);
        border-bottom: 1px solid var(--border);
        padding: 14px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 10;
      }
      .tp-header h1 { font-size: 15px; font-weight: 600; }
      .tp-header .tp-header-right { display: flex; gap: 8px; align-items: center; }
      .tp-header .muted { font-size: 11px; color: var(--muted); }

      /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .tp-body { max-width: 960px; margin: 0 auto; padding: 20px 20px 0; }
      .tp-section {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        margin-bottom: 16px;
        overflow: hidden;
      }
      .tp-section-header {
        padding: 12px 16px;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        user-select: none;
      }
      .tp-section-header h2 { font-size: 13px; font-weight: 600; }
      .tp-section-header .chevron { font-size: 10px; color: var(--muted); transition: transform .2s; }
      .tp-section-header.collapsed .chevron { transform: rotate(-90deg); }
      .tp-section-body { padding: 16px; }
      .tp-section-body.hidden { display: none; }

      /* â”€â”€ Controls row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .tp-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: flex-end;
        margin-bottom: 14px;
      }
      .tp-field { display: flex; flex-direction: column; gap: 4px; }
      .tp-field label { font-size: 11px; color: var(--muted); font-weight: 500; }
      input[type=text], select {
        padding: 6px 10px;
        border: 1px solid var(--border);
        border-radius: 6px;
        background: var(--bg);
        color: var(--text);
        font-size: 13px;
        outline: none;
      }
      input[type=text]:focus, select:focus { border-color: var(--accent); }
      input[type=text] { width: 130px; }

      /* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .btn {
        padding: 6px 14px;
        border: none;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        white-space: nowrap;
      }
      .btn-primary { background: var(--accent); color: #fff; }
      .btn-primary:hover { opacity: .9; }
      .btn-secondary {
        background: var(--bg);
        color: var(--text);
        border: 1px solid var(--border);
      }
      .btn-secondary:hover { border-color: var(--accent); color: var(--accent); }
      .btn-sm { padding: 4px 10px; font-size: 11px; }
      .btn:disabled { opacity: .4; cursor: not-allowed; }

      /* â”€â”€ Status / tag indicators â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .status-ok   { color: var(--ok); }
      .status-warn { color: var(--warn); }
      .status-err  { color: var(--error); }
      .status-info { color: var(--info); }

      .tag {
        display: inline-block;
        padding: 1px 6px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
        letter-spacing: .3px;
        text-transform: uppercase;
      }
      .tag-ok   { background: #d1f5db; color: #1a7a3a; }
      .tag-warn { background: #fff3cc; color: #8a5c00; }
      .tag-err  { background: #ffdad8; color: #a00; }
      .tag-info { background: #e5e5ea; color: #555; }
      body.dark .tag-ok   { background: #1a3d22; color: #5dd879; }
      body.dark .tag-warn { background: #3d2f00; color: #ffd060; }
      body.dark .tag-err  { background: #3d1010; color: #ff7070; }
      body.dark .tag-info { background: #3a3a3c; color: #aaa; }

      /* â”€â”€ Scan table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .scan-table { width: 100%; border-collapse: collapse; font-size: 12px; }
      .scan-table th {
        text-align: left;
        padding: 6px 10px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .4px;
        color: var(--muted);
        border-bottom: 1px solid var(--border);
      }
      .scan-table td { padding: 7px 10px; border-bottom: 1px solid var(--border); vertical-align: top; }
      .scan-row { cursor: pointer; }
      .scan-row:hover td { background: var(--bg); }
      .scan-detail-row td { padding: 0; }
      .scan-detail-inner {
        padding: 12px 16px;
        background: var(--bg);
        border-bottom: 1px solid var(--border);
      }
      .scan-row-unit { font-weight: 600; font-family: var(--mono); }
      .retest-btn { font-size: 10px; margin-left: 6px; vertical-align: middle; }

      /* â”€â”€ Detail table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .detail-table { width: 100%; border-collapse: collapse; font-size: 12px; }
      .detail-table th {
        text-align: left;
        padding: 5px 8px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .4px;
        color: var(--muted);
        border-bottom: 1px solid var(--border);
      }
      .detail-table td { padding: 5px 8px; border-bottom: 1px solid var(--border); }
      .detail-table tr:last-child td { border-bottom: none; }

      /* â”€â”€ Issues list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .issues-list { list-style: none; margin-top: 10px; }
      .issues-list li {
        display: flex;
        gap: 8px;
        align-items: baseline;
        padding: 4px 0;
        font-size: 12px;
        border-bottom: 1px solid var(--border);
      }
      .issues-list li:last-child { border-bottom: none; }
      .issue-item { color: var(--muted); flex: 1; }

      /* â”€â”€ Diff table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .diff-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; }
      .diff-table th {
        padding: 5px 8px;
        text-align: left;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .4px;
        color: var(--muted);
        border-bottom: 1px solid var(--border);
      }
      .diff-table td { padding: 5px 8px; border-bottom: 1px solid var(--border); }

      /* â”€â”€ Drift section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .drift-list { list-style: none; font-size: 12px; margin-top: 8px; }
      .drift-list li { display: flex; gap: 8px; padding: 4px 0; border-bottom: 1px solid var(--border); }
      .drift-list li:last-child { border-bottom: none; }
      .drift-sym { width: 16px; flex-shrink: 0; font-weight: 700; }
      .drift-new  { color: var(--ok); }
      .drift-gone { color: var(--error); }
      .drift-chg  { color: var(--warn); }

      /* â”€â”€ Raw text inspector â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .raw-toggle { font-size: 11px; color: var(--accent); cursor: pointer; margin-top: 10px; display: inline-block; }
      .raw-box {
        margin-top: 8px;
        padding: 10px;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: 6px;
        font-family: var(--mono);
        font-size: 11px;
        white-space: pre-wrap;
        max-height: 280px;
        overflow-y: auto;
        color: var(--text);
      }

      /* â”€â”€ PDF drop zone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .pdf-drop {
        border: 2px dashed var(--border);
        border-radius: 8px;
        padding: 24px;
        text-align: center;
        color: var(--muted);
        font-size: 13px;
        cursor: pointer;
        transition: border-color .15s;
        margin-bottom: 14px;
      }
      .pdf-drop:hover, .pdf-drop.drag-over { border-color: var(--accent); color: var(--accent); }

      /* â”€â”€ Regression table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .regression-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; }
      .regression-table th {
        padding: 5px 8px;
        text-align: left;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .4px;
        color: var(--muted);
        border-bottom: 1px solid var(--border);
      }
      .regression-table td { padding: 5px 8px; border-bottom: 1px solid var(--border); }

      /* â”€â”€ Spinner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .spinner {
        display: inline-block;
        width: 12px;
        height: 12px;
        border: 2px solid var(--border);
        border-top-color: var(--accent);
        border-radius: 50%;
        animation: spin .7s linear infinite;
        vertical-align: middle;
        margin-right: 4px;
      }
      @keyframes spin { to { transform: rotate(360deg); } }

      /* â”€â”€ Report bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .report-bar {
        display: flex;
        gap: 8px;
        align-items: center;
        padding: 12px 16px;
        background: var(--bg);
        border-top: 1px solid var(--border);
        border-radius: 0 0 10px 10px;
      }
      .report-bar .copy-msg { font-size: 11px; color: var(--ok); }

      /* â”€â”€ Empty / status messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .tp-empty { color: var(--muted); font-size: 12px; padding: 12px 0; }
      .tp-status { font-size: 12px; color: var(--muted); margin-bottom: 12px; min-height: 20px; }
    </style>
  </head>
  <body>

    <!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <header class="tp-header">
      <h1>ðŸ”¬ Curtin Deadlines â€” Test Panel</h1>
      <div class="tp-header-right">
        <span class="muted" id="header-status"></span>
        <button class="btn btn-secondary btn-sm" id="theme-btn">Dark mode</button>
      </div>
    </header>

    <div class="tp-body">

      <!-- â”€â”€ 1. Scan All â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="tp-section">
        <div class="tp-section-header" data-target="scan-body">
          <h2>1. Scan All units</h2>
          <span class="chevron">â–¼</span>
        </div>
        <div class="tp-section-body" id="scan-body">
          <div class="tp-controls">
            <div class="tp-field">
              <label>Semester</label>
              <select id="scan-sem">
                <option value="1">S1</option>
                <option value="2">S2</option>
              </select>
            </div>
            <div class="tp-field">
              <label>Year</label>
              <input id="scan-year" type="text" value="2026" style="width:70px" />
            </div>
            <div class="tp-field">
              <label>Extra unit</label>
              <input id="scan-extra" type="text" placeholder="e.g. ISYS1001" />
            </div>
            <div class="tp-field" style="justify-content:flex-end">
              <button class="btn btn-primary" id="scan-btn">Scan All</button>
            </div>
            <div class="tp-field" style="justify-content:flex-end">
              <button class="btn btn-secondary" id="scan-report-btn" disabled>Download Report</button>
            </div>
          </div>
          <div class="tp-status" id="scan-status"></div>
          <div id="scan-results"></div>
        </div>
      </div>

      <!-- â”€â”€ 2. Single Unit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="tp-section">
        <div class="tp-section-header" data-target="single-body">
          <h2>2. Single unit API test</h2>
          <span class="chevron">â–¼</span>
        </div>
        <div class="tp-section-body" id="single-body">
          <div class="tp-controls">
            <div class="tp-field">
              <label>Unit code</label>
              <input id="single-unit" type="text" placeholder="COMP1005" />
            </div>
            <div class="tp-field">
              <label>Semester</label>
              <select id="single-sem">
                <option value="1">S1</option>
                <option value="2">S2</option>
              </select>
            </div>
            <div class="tp-field">
              <label>Year</label>
              <input id="single-year" type="text" value="2026" style="width:70px" />
            </div>
            <div class="tp-field" style="justify-content:flex-end">
              <button class="btn btn-primary" id="single-btn">Run API Test</button>
            </div>
          </div>
          <div class="tp-status" id="single-status"></div>
          <div id="single-results"></div>
        </div>
      </div>

      <!-- â”€â”€ 3. PDF Test â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="tp-section">
        <div class="tp-section-header" data-target="pdf-body">
          <h2>3. PDF test</h2>
          <span class="chevron">â–¼</span>
        </div>
        <div class="tp-section-body" id="pdf-body">
          <div class="tp-controls">
            <div class="tp-field">
              <label>Semester</label>
              <select id="pdf-sem">
                <option value="1">S1</option>
                <option value="2">S2</option>
              </select>
            </div>
            <div class="tp-field">
              <label>Year</label>
              <input id="pdf-year" type="text" value="2026" style="width:70px" />
            </div>
          </div>
          <div
            class="pdf-drop"
            id="pdf-drop"
            role="button"
            tabindex="0"
            aria-label="Drop unit outline PDF here or click to browse"
          >
            Drop unit outline PDF here, or click to browse
          </div>
          <input type="file" id="pdf-input" accept=".pdf" style="display:none" />
          <div class="tp-status" id="pdf-status"></div>
          <div id="pdf-results"></div>
        </div>
      </div>

      <!-- â”€â”€ 4. API â†” PDF Diff â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="tp-section">
        <div class="tp-section-header" data-target="diff-body">
          <h2>4. API â†” PDF diff</h2>
          <span class="chevron">â–¼</span>
        </div>
        <div class="tp-section-body" id="diff-body">
          <div class="tp-status" id="diff-status">Run an API test (section 2) and a PDF test (section 3) for the same unit to see a diff.</div>
          <div id="diff-results"></div>
        </div>
      </div>

      <!-- â”€â”€ 5. Regression â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="tp-section">
        <div class="tp-section-header" data-target="reg-body">
          <h2>5. Regression check</h2>
          <span class="chevron">â–¼</span>
        </div>
        <div class="tp-section-body" id="reg-body">
          <p class="tp-status">Compares scan / single-test results against known-good expected values. Run a scan first.</p>
          <div id="reg-results"></div>
        </div>
      </div>

    </div><!-- /.tp-body -->

    <script src="testPage.js"></script>
  </body>
</html>
